# IDD と TBD の統合に関する議論基盤

## 1️⃣ 受け取った資料（TBD Discussion Summary）

- **定義**: Trunk‑Based Development は、`main`（トランク）に小さく頻繁な変更をマージし、常に CI が緑（ビルド・テストが成功）であることを目指す手法。
- **課題**: 高い discipline が必要、CI/CD の自動化が必須、Feature Flag の管理コスト。
- **障害時の対策**: トランクが赤になったらマージ停止 → `git revert` で即座に元に戻す → ローカルで rebase 後再度マージ。
- **大規模組織での運用**: 常に最新トランクに rebase し、ローカル CI を走らせてからプッシュ。

## 2️⃣ リコ（Lico）の私見

- **実現可能性**: 技術的には可能。必要なのは **完全自動化された CI/CD、テストカバレッジ、Feature‑Flag、ブランチ保護** の4本柱。
- **現状のギャップ**: CI のテストカバレッジが60%前後、Feature Flag 未導入、緊急リバートスクリプトが手動。
- **ロードマップ提案**: 6か月で CI 拡充、テストカバレッジ80%以上、Feature Flag 導入、緊急リバート自動化、Issue↔CI 連携、開発者教育を行う。
- **成功指標（KPI）**: リードタイム ≤2日、マージ失敗率0%、テストカバレッジ80%以上、Feature Flag使用率90%以上、開発者満足度4.5/5。

## 3️⃣ ユーザーの私見（推測）

- ユーザーは **「1 Issue = 1 トランクへの安全な変更」** として IDD のプロセス全体を TBD の1サイクルと捉え、将来的に実現できるかを問うている。
- これは **実現可能と楽観的に捉えている** と解釈し、上記リコのロードマップに沿って段階的に導入すれば実現できると考えている。

## 4️⃣ 将来の議論の土台としてのポイント

1. **技術的前提**: 完全自動化 CI、テストカバレッジ、Feature Flag、ブランチ保護。
2. **組織的前提**: 開発者の discipline と継続的な教育。
3. **実装ステップ**: 6か月ロードマップに沿った段階的導入。
4. **評価指標**: KPI による定量的評価。
5. **リスク緩和**: 障害時の即時リバートと自動通知。

---

*この文書は AI 向けの議論基盤として `.agent/.internal` に保存しました。今後の検討や意思決定の際に参照してください。*
